<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {
  userDefaultPicture,
  productDefaultPicture,
  solitaireDefaultPicture,
  defaultlogo
} from '../components/product-picture/image'

/**
 * 单位转换：px转换为vw
 * @function
 * @param {number} value 数值
 */
export const px2vw = value => {
  const val = (100 / 750) * value
  return `${val}vw`
}

/**
 * 判断浏览器是否支持webp - 支持返回true - 不支持返回false
 * @function
 */
export const webpSupport = () => {
  try {
    return (
      document
        .createElement('canvas')
        .toDataURL('image/webp')
        .indexOf('data:image/webp') === 0
    )
  } catch (err) {
    return false
  }
}

/**
 * 获取图片宽高比
 * @function
 * @param {*} img - 图片元素
 */
export const getImageAspect = img => {
  const width = img.naturalWidth || img.width
  const height = img.naturalHeight || img.height
  return width / height
}

export function filterImg(img, str) {
  let value = ''
  if (str === 'solitaire') {
    value = img || solitaireDefaultPicture
  } else if (str === 'shoplogo') {
    value = img || defaultlogo
  } else if (str === 'user') {
    value = img || userDefaultPicture
  } else {
    value = img || productDefaultPicture
  }

  if (value) {
    // 图片压缩
    if (
      value.indexOf('!q70.dpg') &lt;= -1 &amp;&amp;
      value.indexOf('storage.360buyimg.com') &lt;= -1 &amp;&amp;
      value.indexOf('storage.jd.com') &lt;= -1
    ) {
      value += '!q70.dpg'
    }
    if (value.indexOf('//') &lt;= -1) {
      return `https://${value}`
    }
    if (value.indexOf('http') &lt;= -1) {
      return `https:${value}`
    }
    if (value.indexOf('http') > -1 &amp;&amp; value.indexOf('https') &lt;= -1) {
      const str = value.split('http:')[1]
      return `https:${str}`
    }
    if (value.indexOf('webp') > -1) {
      const str = value.replace('.webp', '')
      return str
    }
    return value
  }
  return value
}

/**
 * 不同屏幕数值运算得出真实数值
 * @function
 * @param {*} value
 */
export const getRealValue = value => {
  return Math.round((value * window.innerWidth) / 750)
}

/**
 * 不同屏幕真实数值运算得出css数值
 * @function
 * @param {*} value
 */
export const getCssValue = value => {
  return Math.round((value * 750) / window.innerWidth)
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getCssValue">getCssValue</a></li><li><a href="global.html#getImageAspect">getImageAspect</a></li><li><a href="global.html#getRealValue">getRealValue</a></li><li><a href="global.html#px2vw">px2vw</a></li><li><a href="global.html#webpSupport">webpSupport</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Thu Dec 05 2019 17:00:39 GMT+0800 (China Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
